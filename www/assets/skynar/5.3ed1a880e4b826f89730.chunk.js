(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"./node_modules/tslib/tslib.es6.js":
/*!*****************************************!*\
  !*** ./node_modules/tslib/tslib.es6.js ***!
  \*****************************************/
/*! exports provided: __extends, __assign, __rest, __decorate, __param, __metadata, __awaiter, __generator, __exportStar, __values, __read, __spread, __await, __asyncGenerator, __asyncDelegator, __asyncValues, __makeTemplateObject, __importStar, __importDefault */function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return a}),n.d(e,"__decorate",function(){return c}),n.d(e,"__param",function(){return l}),n.d(e,"__metadata",function(){return s}),n.d(e,"__awaiter",function(){return u}),n.d(e,"__generator",function(){return f}),n.d(e,"__exportStar",function(){return p}),n.d(e,"__values",function(){return d}),n.d(e,"__read",function(){return h}),n.d(e,"__spread",function(){return m}),n.d(e,"__await",function(){return y}),n.d(e,"__asyncGenerator",function(){return b}),n.d(e,"__asyncDelegator",function(){return g}),n.d(e,"__asyncValues",function(){return v}),n.d(e,"__makeTemplateObject",function(){return _}),n.d(e,"__importStar",function(){return w}),n.d(e,"__importDefault",function(){return x});
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function a(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&(n[r[i]]=t[r[i]])}return n}function c(t,e,n,r){var i,o=arguments.length,a=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,r);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(o<3?i(a):o>3?i(e,n,a):i(e,n))||a);return o>3&&a&&Object.defineProperty(e,n,a),a}function l(t,e){return function(n,r){e(n,r,t)}}function s(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function u(t,e,n,r){return new(n||(n=Promise))(function(i,o){function a(t){try{l(r.next(t))}catch(t){o(t)}}function c(t){try{l(r.throw(t))}catch(t){o(t)}}function l(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(a,c)}l((r=r.apply(t,e||[])).next())})}function f(t,e){var n,r,i,o,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function c(o){return function(c){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,r=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(i=(i=a.trys).length>0&&i[i.length-1])&&(6===o[0]||2===o[0])){a=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){a.label=o[1];break}if(6===o[0]&&a.label<i[1]){a.label=i[1],i=o;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(o);break}i[2]&&a.ops.pop(),a.trys.pop();continue}o=e.call(t,a)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,c])}}}function p(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function d(t){var e="function"==typeof Symbol&&t[Symbol.iterator],n=0;return e?e.call(t):{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}}}function h(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),a=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function m(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(h(arguments[e]));return t}function y(t){return this instanceof y?(this.v=t,this):new y(t)}function b(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r,i=n.apply(t,e||[]),o=[];return r={},a("next"),a("throw"),a("return"),r[Symbol.asyncIterator]=function(){return this},r;function a(t){i[t]&&(r[t]=function(e){return new Promise(function(n,r){o.push([t,e,n,r])>1||c(t,e)})})}function c(t,e){try{(n=i[t](e)).value instanceof y?Promise.resolve(n.value.v).then(l,s):u(o[0][2],n)}catch(t){u(o[0][3],t)}var n}function l(t){c("next",t)}function s(t){c("throw",t)}function u(t,e){t(e),o.shift(),o.length&&c(o[0][0],o[0][1])}}function g(t){var e,n;return e={},r("next"),r("throw",function(t){throw t}),r("return"),e[Symbol.iterator]=function(){return this},e;function r(r,i){e[r]=t[r]?function(e){return(n=!n)?{value:y(t[r](e)),done:"return"===r}:i?i(e):e}:i}}function v(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=d(t),e={},r("next"),r("throw"),r("return"),e[Symbol.asyncIterator]=function(){return this},e);function r(n){e[n]=t[n]&&function(e){return new Promise(function(r,i){(function(t,e,n,r){Promise.resolve(r).then(function(e){t({value:e,done:n})},e)})(r,i,(e=t[n](e)).done,e.value)})}}}function _(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function w(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function x(t){return t&&t.__esModule?t:{default:t}}},"./src/Mail/Guide.tsx":
/*!****************************!*\
  !*** ./src/Mail/Guide.tsx ***!
  \****************************/
/*! exports provided: default */function(t,e,n){"use strict";n.r(e);var r,i,o=n(/*! tslib */"./node_modules/tslib/tslib.es6.js"),a=n(/*! react */"react");!function(t){t[t.props=0]="props",t[t.import=1]="import",t[t.template=2]="template",t[t.send=3]="send"}(r||(r={})),function(t){t[t.wait=0]="wait",t[t.success=1]="success",t[t.fail=2]="fail"}(i||(i={}));var c=function(t){function e(e){var n=t.call(this,e)||this;return n.state={mid:e.mid,mailings:n.props.mailings},n.selectMailing=n.selectMailing.bind(n),n.addMailing=n.addMailing.bind(n),void 0===n.state.mailings&&n.loadMailings(),n}return o.__extends(e,t),e.prototype.render=function(){var t=this,e=void 0;return this.state.mid&&!(e=this.state.mailings.find(function(e){return e.id==t.state.mid}))&&this.props.mailing&&this.props.mailing.id==this.state.mid&&(e=this.props.mailing),a.createElement("div",{className:"mail_guide"},e?a.createElement(s,{mailing:e,back:this.selectMailing.bind(this,0),updateMailing:this.updateMailing}):a.createElement(l,{onSelect:this.selectMailing,mailings:this.state.mailings,addMailing:this.addMailing,basepath:this.props.basepath}))},e.prototype.loadMailings=function(){var t=this;fetch(this.props.basepath+".json?count=1000",{credentials:"include"}).then(function(t){return t.json()}).then(function(e){t.setState({mailings:e.items})})},e.prototype.selectMailing=function(t){this.setState({mid:t})},e.prototype.addMailing=function(t){var e=[t].concat(this.state.mailings);this.setState({mailings:e,mid:t.id})},e.prototype.updateMailing=function(t){var e=this.state.mailings.map(function(e){return e.id==t.id?t:e});this.setState({mailings:e,mid:t.id})},e}(a.Component);e.default=c;var l=function(t){function e(e){var n=t.call(this,e)||this;return n.state={text:"",disabled:!1},n.onText=n.onText.bind(n),n.onNew=n.onNew.bind(n),n}return o.__extends(e,t),e.prototype.render=function(){var t=this;return a.createElement("article",{id:"mailinglist"},a.createElement("header",null,a.createElement("div",{className:"breadcrumbs"},"Select Mailing"),a.createElement("div",{className:"actions"},a.createElement("input",{type:"text",required:!0,onChange:this.onText,value:this.state.text,placeholder:"Enter name"}),a.createElement("button",{onClick:this.onNew,disabled:this.state.text.length<3},"create mailing"))),"object"==typeof this.props.mailings&&this.props.mailings.map?a.createElement("div",{className:"list mailing"},this.props.mailings.map(function(e){return a.createElement("div",{key:e.id,className:"item",onClick:t.select.bind(t,e)},e.title)})," "):a.createElement("div",{className:"loading"},"Loading..."))},e.prototype.onText=function(t){this.setState({text:t.target.value})},e.prototype.onNew=function(){var t=this;this.state.text.replace(/\s/g,"").length>=3&&fetch(this.props.basepath+"/add.json",{credentials:"include",method:"POST",body:"entity[name]="+encodeURIComponent(this.state.text),headers:{"Content-Type":"application/x-www-form-urlencoded"}}).then(function(t){return t.json()}).then(function(e){t.props.addMailing(e.entity),t.setState({disabled:!1})}).catch(function(e){t.setState({disabled:!1})})},e.prototype.select=function(t,e){this.props.onSelect(t.id)},e}(a.Component),s=function(t){function e(e){var n=t.call(this,e)||this;return n.onFile=n.onFile.bind(n),n}return o.__extends(e,t),e.prototype.componentDidMount=function(){this.props},e.prototype.render=function(){return a.createElement("article",{id:"mailingview"},a.createElement("header",null,a.createElement("div",{className:"breadcrumbs"},a.createElement("a",{href:"#back",onClick:this.props.back},"<Mailing")," / ",this.props.mailing.title)),"object"==typeof this.props.mailing.stats?a.createElement("div",{className:"steps"},a.createElement("div",{className:"step1"},a.createElement("h3",null,"1. Import recipients"),a.createElement("label",null,"Select file: ",a.createElement("input",{type:"file",accept:".csv",onChange:this.onFile})))):a.createElement("div",{className:"loading"},"Loading..."))},e.prototype.onFile=function(t){var e=t.target.files.length>0?t.target.files[0]:null;this.setState({csvfile:e})},e}(a.Component)}}]);