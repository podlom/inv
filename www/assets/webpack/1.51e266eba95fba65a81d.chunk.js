(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/Template/TplEdit.scss":
/*!***********************************!*\
  !*** ./src/Template/TplEdit.scss ***!
  \***********************************/
/*! no static exports found */function(t,e){throw new Error("Module parse failed: Unexpected token (1:0)\nYou may need an appropriate loader to handle this file type, currently no loaders are configured to process this file. See https://webpack.js.org/concepts#loaders\n> .tpl_edit{\n| \n| \t.ace_editor{")},"./src/Template/TplEdit.tsx":
/*!**********************************!*\
  !*** ./src/Template/TplEdit.tsx ***!
  \**********************************/
/*! exports provided: default */function(t,e,n){"use strict";n.r(e);var r=n(/*! tslib */"./node_modules/tslib/tslib.es6.js"),s=n(/*! react */"react");!function(){var t=new Error("Cannot find module 'react-ace'");throw t.code="MODULE_NOT_FOUND",t}();var a=n(/*! ./TplConfig */"./src/Template/TplConfig.tsx"),i=n(/*! ./TplResultSet */"./src/Template/TplResultSet.tsx");!function(){var t=new Error("Cannot find module 'brace/mode/smarty.js'");throw t.code="MODULE_NOT_FOUND",t}(),function(){var t=new Error("Cannot find module 'brace/theme/monokai.js'");throw t.code="MODULE_NOT_FOUND",t}();n(/*! ./TplEdit.scss */"./src/Template/TplEdit.scss");var o=function(t){function e(e){var n=t.call(this,e)||this;return n.state={results:[n.props.result],current:0,text:n.props.text},n.onChange=n.onChange.bind(n),n.refResult=n.refResult.bind(n),n.save=n.save.bind(n),n}return r.__extends(e,t),e.prototype.onChange=function(t){this.setState({text:t})},e.prototype.refResult=function(t){this.rs=t},e.prototype.save=function(t){var e=this;t.preventDefault();var n=t.currentTarget;n.disabled=!0,n.innerHTML='\n\t\t\t<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n\t\t\tСохраняю...\n\t\t\t',fetch("",{method:"PUT",body:this.state.text,credentials:"include"}).then(function(t){return 200==t.status?(n.innerHTML='\n\t\t\t\t\t\t<i class="fa fa-check" aria-hidden="true"></i> Сохранено\n\t\t\t\t\t',setTimeout(function(){n.disabled=!1,n.innerHTML='\n\t\t\t\t\t\t\t<i class="fa fa-floppy-o" aria-hidden="true"></i> Сохранить настройки\n\t\t\t\t\t\t'},3e3)):n.innerHTML="\n\t\t\t\t\t\tПри сохранении возникла ошибка!\n\t\t\t\t\t",t.text()}).then(function(t){return e.rs.addResult(t)})},e.prototype.render=function(){return s.createElement("div",{className:"tpl_edit"},s.createElement("section",{className:"mb-5"},s.createElement(a.TplConfig,{config:this.props.config,url:this.props.url})),s.createElement("section",{className:"mb-5"},s.createElement("h3",{className:"h5"},"HTML редактор"),s.createElement(!function(){var t=new Error("Cannot find module 'react-ace'");throw t.code="MODULE_NOT_FOUND",t}(),{mode:"smarty",theme:"monokai",name:"tpl",onChange:this.onChange,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:this.state.text,setOptions:{showLineNumbers:!0,tabSize:3}}),s.createElement("div",{className:"text-right mt-3"},s.createElement("button",{className:"btn btn-main save-settings",onClick:this.save},s.createElement("i",{className:"fa fa-floppy-o","aria-hidden":"true"})," Сохранить шаблон"))),s.createElement("section",{className:""},s.createElement("h3",{className:"h5"},"Предпросмотр письма"),s.createElement("div",{className:"container-fluid letter-page p-5"},s.createElement("div",{className:"row justify-content-md-center"},s.createElement("div",{className:"col col-lg-8"},s.createElement(i.default,{result:this.props.result,ref:this.refResult}))))))},e}(s.Component);e.default=o},"./src/Template/TplResultSet.tsx":
/*!***************************************!*\
  !*** ./src/Template/TplResultSet.tsx ***!
  \***************************************/
/*! exports provided: default */function(t,e,n){"use strict";n.r(e);var r=n(/*! tslib */"./node_modules/tslib/tslib.es6.js"),s=n(/*! react */"react"),a=function(t){function e(e){var n=t.call(this,e)||this;return n.state={results:[n.props.result],current:0},n.refiframe=n.refiframe.bind(n),n.updateFrame=n.updateFrame.bind(n),n}return r.__extends(e,t),e.prototype.addResult=function(t){var e=this.state.results.slice();e.push(t),this.setState({results:e,current:e.length-1})},e.prototype.onChange=function(t){console.log(t)},e.prototype.updateFrame=function(){if(this.iframe){var t=this.iframe.contentWindow.document;t.open(),t.write(this.getCurrentResult(this.state)),t.close()}},e.prototype.componentDidUpdate=function(t,e){this.getCurrentResult(e)!=this.getCurrentResult(this.state)&&this.updateFrame()},e.prototype.getCurrentResult=function(t){return"string"==typeof t.results[t.current]?t.results[t.current]:t.results[t.results.length-1]},e.prototype.refiframe=function(t){this.iframe=t,this.updateFrame()},e.prototype.render=function(){return s.createElement("div",{className:"tpl_result"},s.createElement("iframe",{frameBorder:"0",allowFullScreen:!0,ref:this.refiframe}))},e}(s.Component);e.default=a},"./src/Template/index.ts":
/*!*******************************!*\
  !*** ./src/Template/index.ts ***!
  \*******************************/
/*! exports provided: TplConfig, TplEdit, TplResultSet */function(t,e,n){"use strict";n.r(e);var r=n(/*! ./TplConfig */"./src/Template/TplConfig.tsx");n.d(e,"TplConfig",function(){return r.TplConfig});var s=n(/*! ./TplEdit */"./src/Template/TplEdit.tsx");n.d(e,"TplEdit",function(){return s.default});var a=n(/*! ./TplResultSet */"./src/Template/TplResultSet.tsx");n.d(e,"TplResultSet",function(){return a.default})}}]);