(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"./src/Template/TplEdit.scss":
/*!***********************************!*\
  !*** ./src/Template/TplEdit.scss ***!
  \***********************************/
/*! no static exports found */function(e,t){throw new Error("Module build failed (from ./node_modules/mini-css-extract-plugin/dist/loader.js):\nTypeError: this[MODULE_TYPE] is not a function\n    at childCompiler.runAsChild (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/mini-css-extract-plugin/dist/loader.js:170:24)\n    at compile (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compiler.js:343:11)\n    at hooks.afterCompile.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compiler.js:671:15)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:24:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at compilation.seal.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compiler.js:668:31)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:6:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at hooks.optimizeAssets.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1385:35)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:6:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at hooks.optimizeChunkAssets.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1376:32)\n    at _err0 (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:11:1)\n    at taskRunner.run (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/terser-webpack-plugin/dist/index.js:321:9)\n    at TaskRunner.run (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/terser-webpack-plugin/dist/TaskRunner.js:48:7)\n    at TerserPlugin.optimizeFn (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/terser-webpack-plugin/dist/index.js:227:18)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:7:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at hooks.additionalAssets.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1371:36)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:6:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at hooks.optimizeTree.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1367:32)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:6:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at Compilation.seal (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1304:27)\n    at compilation.finish.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compiler.js:665:18)\n    at hooks.finishModules.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1224:4)\n    at AsyncSeriesHook.eval [as callAsync] (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:15:1)\n    at AsyncSeriesHook.lazyCompileHook (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/Hook.js:154:20)\n    at Compilation.finish (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1216:28)\n    at hooks.make.callAsync.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compiler.js:662:17)\n    at _err0 (eval at create (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/node_modules/tapable/lib/HookCodeFactory.js:33:10), <anonymous>:11:1)\n    at _addModuleChain (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1148:12)\n    at processModuleDependencies.err (/home/devinv/d/w/dev.inventure.com.ua/data/react/node_modules/webpack/lib/Compilation.js:1060:9)\n    at process._tickCallback (internal/process/next_tick.js:61:11)")},"./src/Template/TplEdit.tsx":
/*!**********************************!*\
  !*** ./src/Template/TplEdit.tsx ***!
  \**********************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var o=a(/*! tslib */"./node_modules/tslib/tslib.es6.js"),n=a(/*! react */"react"),s=a(/*! react-ace */"./node_modules/react-ace/lib/index.js"),d=a.n(s),r=a(/*! ./TplConfig */"./src/Template/TplConfig.tsx"),i=a(/*! ./TplResultSet */"./src/Template/TplResultSet.tsx"),l=(a(/*! brace/mode/smarty.js */"./node_modules/brace/mode/smarty.js"),a(/*! brace/theme/monokai.js */"./node_modules/brace/theme/monokai.js"),a(/*! ./TplEdit.scss */"./src/Template/TplEdit.scss"),function(e){function t(t){var a=e.call(this,t)||this;return a.state={results:[a.props.result],current:0,text:a.props.text},a.onChange=a.onChange.bind(a),a.refResult=a.refResult.bind(a),a.save=a.save.bind(a),a}return o.__extends(t,e),t.prototype.onChange=function(e){this.setState({text:e})},t.prototype.refResult=function(e){this.rs=e},t.prototype.save=function(e){var t=this;e.preventDefault();var a=e.currentTarget;a.disabled=!0,a.innerHTML='\n\t\t\t<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>\n\t\t\tСохраняю...\n\t\t\t',fetch("",{method:"PUT",body:this.state.text,credentials:"include"}).then(function(e){return 200==e.status?(a.innerHTML='\n\t\t\t\t\t\t<i class="fa fa-check" aria-hidden="true"></i> Сохранено\n\t\t\t\t\t',setTimeout(function(){a.disabled=!1,a.innerHTML='\n\t\t\t\t\t\t\t<i class="fa fa-floppy-o" aria-hidden="true"></i> Сохранить настройки\n\t\t\t\t\t\t'},3e3)):a.innerHTML="\n\t\t\t\t\t\tПри сохранении возникла ошибка!\n\t\t\t\t\t",e.text()}).then(function(e){return t.rs.addResult(e)})},t.prototype.render=function(){return n.createElement("div",{className:"tpl_edit"},n.createElement("section",{className:"mb-5"},n.createElement(r.TplConfig,{config:this.props.config,url:this.props.url})),n.createElement("section",{className:"mb-5"},n.createElement("h3",{className:"h5"},"HTML редактор"),n.createElement(d.a,{mode:"smarty",theme:"monokai",name:"tpl",onChange:this.onChange,fontSize:14,showPrintMargin:!0,showGutter:!0,highlightActiveLine:!0,value:this.state.text,setOptions:{showLineNumbers:!0,tabSize:3}}),n.createElement("div",{className:"text-right mt-3"},n.createElement("button",{className:"btn btn-main save-settings",onClick:this.save},n.createElement("i",{className:"fa fa-floppy-o","aria-hidden":"true"})," Сохранить шаблон"))),n.createElement("section",{className:""},n.createElement("h3",{className:"h5"},"Предпросмотр письма"),n.createElement("div",{className:"container-fluid letter-page p-5"},n.createElement("div",{className:"row justify-content-md-center"},n.createElement("div",{className:"col col-lg-8"},n.createElement(i.default,{result:this.props.result,ref:this.refResult}))))))},t}(n.Component));t.default=l},"./src/Template/TplResultSet.tsx":
/*!***************************************!*\
  !*** ./src/Template/TplResultSet.tsx ***!
  \***************************************/
/*! exports provided: default */function(e,t,a){"use strict";a.r(t);var o=a(/*! tslib */"./node_modules/tslib/tslib.es6.js"),n=a(/*! react */"react"),s=function(e){function t(t){var a=e.call(this,t)||this;return a.state={results:[a.props.result],current:0},a.refiframe=a.refiframe.bind(a),a.updateFrame=a.updateFrame.bind(a),a}return o.__extends(t,e),t.prototype.addResult=function(e){var t=this.state.results.slice();t.push(e),this.setState({results:t,current:t.length-1})},t.prototype.onChange=function(e){console.log(e)},t.prototype.updateFrame=function(){if(this.iframe){var e=this.iframe.contentWindow.document;e.open(),e.write(this.getCurrentResult(this.state)),e.close()}},t.prototype.componentDidUpdate=function(e,t){this.getCurrentResult(t)!=this.getCurrentResult(this.state)&&this.updateFrame()},t.prototype.getCurrentResult=function(e){return"string"==typeof e.results[e.current]?e.results[e.current]:e.results[e.results.length-1]},t.prototype.refiframe=function(e){this.iframe=e,this.updateFrame()},t.prototype.render=function(){return n.createElement("div",{className:"tpl_result"},n.createElement("iframe",{frameBorder:"0",allowFullScreen:!0,ref:this.refiframe}))},t}(n.Component);t.default=s}}]);